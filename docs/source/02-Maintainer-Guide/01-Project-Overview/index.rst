Project Overview
==============================================================================

30 秒了解本项目
------------------------------------------------------------------------------
**这是什么**: 一个 SaaS Web App 的 **模板项目**，不是具体业务应用。

**技术栈**: Next.js (前端) + FastAPI (后端) + Vercel (部署)

**已集成功能**:

- 用户认证 (注册/登录/邮箱验证)
- OAuth 登录 (Google)
- 安全防护 (CSRF, 频率限制, Token 刷新)
- 多环境配置管理
- 单元测试

**设计哲学**: 广度优先，覆盖 SaaS 常见 best practices，但 **故意不实现具体业务逻辑**。
拿到这个模板后，只需添加你的业务代码。


项目定位
------------------------------------------------------------------------------

摘要
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
本项目是一个 **生产就绪的 SaaS 应用模板**。

它解决的问题是：每次启动新的 SaaS 项目时，都需要重复实现用户认证、安全防护、部署配置等基础设施。
本模板将这些 "脏活累活" 预先完成，让开发者可以专注于业务逻辑。

细节
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
**为什么是模板而不是框架？**

- 模板 = 直接 fork，然后修改
- 框架 = 作为依赖引入，受限于框架设计
- 模板更灵活，你拥有全部代码控制权

**为什么 SaaS 应用只有一个文本框？**

这是 **故意为之**。模板的核心价值在于基础设施，不在于业务功能。
一个简单的 "保存文本到数据库" 功能足以验证整个技术栈是否正常工作。
实际项目中，用 AI 工具可以快速替换成真正的业务逻辑。

**目标用户**:

- 想快速启动 SaaS 项目的独立开发者
- 学习 FastAPI + Next.js 全栈开发的工程师
- 使用 AI 辅助编程工具进行开发的团队


技术架构
------------------------------------------------------------------------------

摘要
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
- **部署平台**: Vercel (前端 + 后端统一部署)
- **前端**:

  - Next.js 16 (React 框架, App Router)
  - TypeScript (类型安全)
  - Tailwind CSS (样式)

- **后端**:

  - FastAPI (Python Web 框架)
  - SQLAlchemy (ORM, 异步)
  - PostgreSQL (数据库)

细节
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
**前端技术栈**:

.. list-table::
   :header-rows: 1
   :widths: 20 20 60

   * - 技术
     - 版本
     - 用途
   * - Next.js
     - 16.x
     - React 框架 (App Router)
   * - TypeScript
     - 5.x
     - 类型安全
   * - Tailwind
     - 4.x
     - CSS 样式
   * - Firebase
     - 12.x
     - Google OAuth

**后端技术栈**:

.. list-table::
   :header-rows: 1
   :widths: 20 20 60

   * - 技术
     - 版本
     - 用途
   * - FastAPI
     - 0.123+
     - Web 框架
   * - SQLAlchemy
     - 2.x
     - ORM (异步)
   * - fastapi-users
     - 15.x
     - 用户认证
   * - Pydantic
     - 2.x
     - 数据验证

**部署与 DevOps**:

.. list-table::
   :header-rows: 1
   :widths: 20 80

   * - 工具
     - 用途
   * - Vercel
     - 前端 + 后端部署平台
   * - uv
     - Python 包管理 (替代 pip/poetry)
   * - mise
     - 任务运行器 (替代 Makefile)
   * - Sphinx
     - 文档生成
   * - pytest
     - 单元测试


已实现功能清单
------------------------------------------------------------------------------

摘要
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
.. list-table::
   :header-rows: 1
   :widths: 20 40 40

   * - 分类
     - 功能
     - 状态
   * - 认证
     - 注册、登录、邮箱验证、密码重置
     - ✅ 完成
   * - OAuth
     - Google 账号登录
     - ✅ 完成
   * - 安全
     - CSRF 防护、频率限制、Token 刷新
     - ✅ 完成
   * - 前端
     - 首页、认证页面、用户仪表盘
     - ✅ 完成
   * - 后端
     - 模块化路由、配置管理、数据库集成
     - ✅ 完成
   * - DevOps
     - 多环境部署、CI/CD 配置
     - ✅ 完成
   * - 测试
     - 后端单元测试
     - ✅ 完成
   * - 文档
     - Sphinx 文档站点
     - ✅ 完成

细节
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
**认证功能详情**:

- 邮箱密码注册，发送验证邮件
- JWT Access Token + Refresh Token 双 Token 机制
- "记住我" 功能 (30 天有效期)
- 密码修改、忘记密码流程

**安全功能详情**:

- CSRF Token 保护表单提交
- 登录、注册、忘记密码接口的频率限制
- Access Token 过期后自动刷新
- OAuth 用户无法修改密码 (由 Google 管理)

**故意未实现**:

- 具体业务逻辑 (只有简单的文本存储示例)
- 付费/订阅功能
- 管理员后台 (有基础的 SQLAdmin，但功能有限)


目录结构
------------------------------------------------------------------------------

摘要
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
- **前端代码**:

  - ``app/`` - Next.js 页面
  - ``components/`` - React 组件
  - ``constants/`` - 常量定义
  - ``lib/`` - 工具函数

- **后端代码**:

  - ``learn_fastapi_auth/`` - Python 包

    - ``routers/`` - API 路由
    - ``auth/`` - 认证逻辑
    - ``core/`` - 应用核心

- **其他**:

  - ``tests/`` - pytest 测试
  - ``docs/`` - Sphinx 文档
  - ``vercel.json`` - Vercel 部署配置
  - ``pyproject.toml`` - Python 项目配置
  - ``mise.toml`` - 任务运行器配置

细节
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
**前端目录说明**:

.. list-table::
   :header-rows: 1
   :widths: 30 70

   * - 目录
     - 职责
   * - ``app/``
     - Next.js App Router 页面，按模块分组
   * - ``components/``
     - React 组件 (ui/, layout/, saas/, user/)
   * - ``constants/``
     - API 端点、路由、错误消息等常量
   * - ``lib/``
     - Token 管理、API 请求封装
   * - ``hooks/``
     - 自定义 React Hooks
   * - ``types/``
     - TypeScript 类型定义

**后端目录说明**:

.. list-table::
   :header-rows: 1
   :widths: 30 70

   * - 目录
     - 职责
   * - ``routers/``
     - HTTP 路由定义
   * - ``auth/``
     - 用户认证、邮件发送、Firebase
   * - ``core/``
     - 应用工厂、中间件、生命周期
   * - ``models.py``
     - SQLAlchemy ORM 模型
   * - ``schemas.py``
     - Pydantic 请求/响应 Schema
   * - ``config.py``
     - 配置管理


工具链
------------------------------------------------------------------------------

摘要
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

.. list-table::
   :header-rows: 1
   :widths: 20 30 50

   * - 工具
     - 命令示例
     - 用途
   * - mise
     - ``mise run <task>``
     - 运行预定义任务
   * - uv
     - ``uv sync``
     - 安装 Python 依赖
   * - pnpm
     - ``pnpm run <script>``
     - 运行前端脚本

所有项目操作命令都定义在 ``mise.toml`` 文件中，请直接阅读该文件了解可用的任务。
